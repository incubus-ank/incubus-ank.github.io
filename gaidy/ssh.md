# SSH

### Что такое SSH?

SSH это протокол, использующий клиент-серверную модель для аутентификации удаленных систем и обеспечения шифрования данных, обмен которыми происходит в рамках удаленного доступа.

По умолчанию для работы протокола используется TCP-22 порт: на нем сервер (хост) ожидает входящее подключение и, после получения команды и проведения аутентификации, организует запуск клиента, открывая выбранную пользователем оболочку. При необходимости пользователь может менять используемый порт.\
Для создания SSH подключения клиент должен инициировать соединение с сервером, обеспечив защищенное соединение и подтвердив свой идентификатор (проверяются соответствие идентификатора с предыдущими записями, хранящимися в RSA-файле, и личные данные пользователя, необходимые для аутентификации).

### Подключение

Так выглядит команда для подключение. Принято считать, что инициатор подключения является Клиентом, а ПК, к которому подключаются, Сервер.&#x20;

```bash
ssh <user_name_on_server>@<server_ip>
```

Если имя пользователя оставить пустым, то вместо него будет использоваться имя пользователя на ПК клиента. IP сервера можно хранить в переменной окружения и вызывать по названию переменной с `$` в начале.

Обычно вход через пользователя подтверждается паролем этого пользователя, если не установлены иные настройки.

### Вход по RSA-ключу

Для того, чтобы не вводить пароль постоянно или не ставить его простым, можно настроить вход по RSA-ключу этой командой.

```bash
ssh-keygen //СОздается ключ в дириктории /home/user/.ssh/id_rsa
```

Поля, которые попросит заполнить система заполнять не обязательно, можно просто оставить пустыми.

C помощью следующей команды можно подключить логи по ключу. Вас попросят ввести пароль от пользователя.

```
ssh-copy-id <user_name_on_server>@<server_ip>
```

### Отключение входа по паролю

Подключение по паролю не безопасно, поэтому его часто отключают. Для того, что это сделать необходимо изменить файл конфигурации ssh следующей командой.&#x20;

```
sudo vim /etc/ssh/sshd_config
```

В этом файле есть переменная `PasswordAuthentication`. В зависимости от его значения вход по паролю либо включен, либо выключен.

Аналогично в файле конфигурации SSH можно настроить другие аспекты его работы, например сменить порт подключения (Стандартный порт 22) или перечислить пользователей, под которыми можно входить через ssh
